<html>
<head>
	<meta charset="UTF-8" />
	<meta author="Timo Van Neerden" />
	<title>Tiles</title>
<style>

.block-containter {
	max-width: 1100px;
	background: rgba(255, 0, 0, .3);
	display: flex;
	flex-wrap: wrap;
	justify-content: left;
}


.bloc {
	padding: 10px;
	box-sizing: border-box;
	border: 1px dashed red;
}

.bloc img {
	max-height: 200px;

}

</style>
</head>
<body>
<div class="block-containter">
	<div class="bloc"><img src="i/1.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/2.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/3.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/4.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/5.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/6.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/7.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/8.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/9.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/a.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/b.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/c.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/d.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/e.jpg" alt="a" /></div>
	<div class="bloc"><img src="i/f.jpg" alt="a" /></div>
</div>

<script type="text/javascript">

(function tileImages() {
	var blocs = document.querySelectorAll('.block-containter .bloc');
	var containerW = document.querySelector('.block-containter').clientWidth;

	for (var i=0, len=blocs.length, summedBlocWidth = 0, fstImOfRow=0 ; i<len ; i++) {
		var currBloc = blocs[i];
		var currImg = currBloc.querySelector('img');
		var currBlocMarginInW = currBloc.offsetWidth + parseInt(getComputedStyle(currBloc).marginLeft) + parseInt(getComputedStyle(currBloc).marginRight);

		// if we have fallen on a new row
		if (summedBlocWidth + currBlocMarginInW >= containerW) {
			var whiteSpace = containerW - summedBlocWidth;
			console.log(whiteSpace);
			var delta = parseInt( (whiteSpace)/(i-fstImOfRow) ); // white space shared amongs the blocs

			for (var j=fstImOfRow ; j<i ; j++) { // share the space among the blocs of the row

				var w = parseInt(getComputedStyle(blocs[j]).width) - parseInt(getComputedStyle(blocs[j]).paddingLeft) - parseInt(getComputedStyle(blocs[j]).paddingRight);
				// if the bloc is bigger than the image (on purpose, bloc need min-width)
				if ( parseInt(blocs[j].querySelector('img').clientWidth) < w-2 ) {
					blocs[j].style.width = parseInt(blocs[j].clientWidth + delta);
				} else {
					blocs[j].querySelector('img').style.width = parseInt(blocs[j].querySelector('img').clientWidth + delta);
				}
			}

			fstImOfRow = i;
			summedBlocWidth = 0;
		}
		summedBlocWidth += currBlocMarginInW;
	}
}());

</script>

<footer>Demo Images Â©<a href="https://www.flickr.com/people/doug88888/">Doug88888</a></footer>
</body>
</html>

